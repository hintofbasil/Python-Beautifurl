---
kind: pipeline
name: default

steps:
- name: install-and-test
  image: python:3.7
  pull: always
  commands:
    - pip install -r requirements.txt
    - pylint --disable=missing-docstring,protected-access,fixme beautifurl
    - python test.py

- name: upload
  image: python:3.7
  pull: always
  environment:
    TWINE_USERNAME:
      from_secret: pypi_username
    TWINE_PASSWORD:
      from_secret: pypi_password
  commands:
    - pip install twine wheel
    - python setup.py sdist bdist_wheel
    - twine upload --skip-existing dist/*
  when:
    branch: master
    event: push

---
kind: signature
hmac: 7f9fecfbe12f2a1069171f05a01cb916b08ec5ae55ca1fd5e9293a821e496d00

...
